id: kraken_passive_radar_krakensdr_source
label: KrakenSDR Source
category: '[Kraken Passive Radar]'
flags: [throttle]

parameters:
- id: id
  label: ID
  dtype: id
- id: frequency
  label: Center Frequency
  dtype: float
  default: 100e6
- id: sample_rate
  label: Sample Rate
  dtype: float
  default: 2.4e6
- id: gain
  label: Gain (dB)
  dtype: float
  default: 30.0

inputs:
- id: noise_source
  label: Noise Source
  domain: message
  optional: true

outputs:
- label: ch
  domain: stream
  dtype: complex
  multiplicity: 5

templates:
  imports: from kraken_passive_radar import krakensdr_source
  make: krakensdr_source(frequency=${frequency}, sample_rate=${sample_rate}, gain=${gain})
  callbacks:
  - set_frequency(${frequency})
  - set_sample_rate(${sample_rate})
  - set_gain(${gain})
  - set_noise_source(${noise_source})

file_format: 1
